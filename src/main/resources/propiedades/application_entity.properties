spring.application.name=spring-rest
# ================================
# CONFIGURACIÓN DEL SERVIDOR
# ================================
server.port=8080

# ================================
# CONFIGURACIÓN DE BASE DE DATOS (MariaDB)
# ================================
spring.datasource.url=jdbc:mariadb://localhost:3306/db_rest?useUnicode=true&characterEncoding=utf8&useSSL=false
spring.datasource.username=root
spring.datasource.password=pj123456
spring.datasource.driver-class-name=org.mariadb.jdbc.Driver

# |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
# ================================
# ================================
# JPA / HIBERNATE
# ================================
# Hibernate generará las tablas basándose en las entidades @Entity.
# En cada arranque:
#   - Si existen tablas, las elimina.
#   - Las vuelve a crear según el modelo de entidades.
spring.jpa.hibernate.ddl-auto=create
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.database-platform=org.hibernate.dialect.MariaDBDialect

# Asegura que la inicialización de datos (data.sql)
# se ejecute DESPUÉS de que Hibernate haya creado las tablas.
spring.jpa.defer-datasource-initialization=true


# ================================
# INICIALIZACIÓN DE DATOS (data.sql)
# ================================
# Fuerza la ejecución de scripts de datos al iniciar la aplicación,
# incluso si la base de datos ya tiene contenido.
spring.sql.init.mode=always

# Indica la ubicación del archivo con los INSERT iniciales.
# 'classpath:' apunta a src/main/resources/
spring.sql.init.data-locations=classpath:data.sql

# Si ocurre un error al ejecutar data.sql,
# se detiene el arranque de la aplicación.
spring.sql.init.continue-on-error=false


# ================================
# RESULTADO DE ESTA CONFIGURACIÓN
# ================================
# ✔ Las tablas se crean automáticamente a partir de las entidades @Entity.
# ✔ En cada arranque, la estructura de la BD se reinicia (por 'create').
# ✔ El archivo data.sql inserta los datos iniciales (solo INSERTs, sin CREATE/DROP).
# ✔ Los datos de ejemplo estarán listos para probar la aplicación al iniciar.
# ✔ No necesitas mantener scripts de creación de tablas: el modelo es el código Java.
# ================================
# |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

# ================================
# POOL DE CONEXIONES (HikariCP)
# ================================
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=30000
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.max-lifetime=1800000